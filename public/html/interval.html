<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Interval / Array</title>
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<style>
		.wrapper {max-width: 800px; margin: auto; display: flex; flex-wrap: wrap; padding: 8px; border: 2px solid #333;}
		.box {flex: calc(25% - 16px) 0 0; margin: 8px; border: 2px solid #aaa; height: 150px; position: relative;}
		.bg {width: 100%; height: 100%; position: absolute; opacity: 0; transition:all 0.5s;}
		.red {background-color: red; opacity: 1;}
		.green {background-color: green;}
		.blue {background-color: blue;}
		.orange {background-color: orange;}
		.purple {background-color: purple;}
		.pager-wrap{position: absolute; z-index: 1; display: flex; top: 4px; left: 20px; }
		.pager{font-size: 30px; cursor: pointer; color: #333;}
		.pager.active{color: #eee;}
	</style>
	<script src="../js/jquery-3.5.1.min.js"></script>
</head>
<body>
	<div class="wrapper">
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
		<div class="box">
			<div class="bg red"></div>
			<div class="bg green"></div>
			<div class="bg blue"></div>
			<div class="bg orange"></div>
			<div class="bg purple"></div>
			<div class="pager-wrap">
				<div class="pager active">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
				<div class="pager">●</div>
			</div>
		</div>
	</div>

	<script>
		var last;
		var box;
		var idx;
		var interval;
				
		function boxAni(){
			$(".box").eq(box).find(".bg").css("opacity", 0);
			$(".box").eq(box).find(".bg").eq(idx).css("opacity", 1);
			$(".box").eq(box).find(".pager").removeClass("active");
			$(".box").eq(box).find(".pager").eq(idx).addClass("active");
		}

		function onInterval(){
			last = $(this).find(".bg").length - 1;
			if(idx == last) idx = 0;
			else idx ++;
			boxAni();
		}

		function onBoxOver(){
			box = $(this).index();
			idx = 1;
			boxAni();
			interval = setInterval(onInterval , 2000);
		}

		function onBoxLeave(){
			idx = 0;
			boxAni();
			clearInterval(interval);
		}

		function onPagerClick(){
			idx = $(this).index();
			boxAni();
			clearInterval(interval);
			interval = setInterval(onInterval, 2000);
		}

		$(".box").hover(onBoxOver , onBoxLeave);
		$(".pager").click(onPagerClick);
	</script>

</body>
</html>